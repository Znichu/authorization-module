(this["webpackJsonpauthorization-module"]=this["webpackJsonpauthorization-module"]||[]).push([[0],{134:function(e,t,n){e.exports=n(213)},139:function(e,t,n){},140:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(10),o=n.n(l),c=(n(139),n(140),n(141),n(214)),s=n(30);function i(){return r.createElement(c.a,{mode:"horizontal"},r.createElement(c.a.Item,{key:"profile"},r.createElement(s.c,{to:"/profile"},"Profile")),r.createElement(c.a.Item,{key:"sign-in"},r.createElement(s.c,{to:"/sign-in"},"Sign-in")),r.createElement(c.a.Item,{key:"register"},r.createElement(s.c,{to:"/register"},"Register")),r.createElement(c.a.Item,{key:"forgot"},r.createElement(s.c,{to:"/forgot"},"Forgot")),r.createElement(c.a.Item,{key:"set-new-pass"},r.createElement(s.c,{to:"/set-new-pass"},"Set new pass")))}var u=n(20),m=n(32),d=n(5),p=n.n(d),f=n(24),E=n(44),h=n(63),g=n.n(h),b=g.a.create({baseURL:"http://localhost:7542/1.0/"}),v=function(e,t,n){return b.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data})).catch((function(e){return e}))},w=function(){return b.delete("auth/login").then((function(e){return e.data})).catch((function(e){return e}))},O={_id:null,email:null,rememberMe:!1,isAdmin:!1,name:null,verified:null,publicCardPacksCount:null,__v:null,password:null,token:null,success:!1},_=function(e){return{type:"SET_USER_DATA",authUserData:e}},S=function(){return function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:e.sent.success&&t(_({_id:null,email:null,rememberMe:!1,isAdmin:!1,name:null,verified:null,publicCardPacksCount:null,__v:null,password:null,token:null,success:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(E.a)({},e,{},t.authUserData);default:return e}},j=function(e){var t=Object(m.b)();return r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,"Profile")),r.createElement("button",{onClick:function(){t(S)}},"Logout"))},C=n(33),R=n(66),k=n(39),P=n(217),A=k.a().shape({email:k.b().required().min(2),password:k.b().required().min(8)}),x=function(e){var t=Object(m.b)(),n=Object(C.d)({resolver:Object(R.a)(A)}),a=n.register,l=n.handleSubmit,o=n.errors,c=Object(m.c)((function(e){return e.singInReducer.success}));return r.createElement(r.Fragment,null,c?r.createElement(u.a,{to:"/profile"}):r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,"SignIn")),r.createElement("div",null,r.createElement("form",{onSubmit:l((function(e){var n=e.email,r=e.password,a=e.rememberMe;t(function(e,t,n){return function(){var r=Object(f.a)(p.a.mark((function r(a){var l;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(e,t,n);case 2:(l=r.sent).success&&a(_(l));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(n,r,a)),console.log(e)}))},r.createElement("div",null,r.createElement("label",null,"Login: "),r.createElement("input",{name:"email",type:"text",ref:a}),o.email&&r.createElement(P.a,{message:"Login is required",type:"error",showIcon:!0})),r.createElement("div",null,r.createElement("label",null,"Password: "),r.createElement("input",{name:"password",type:"password",ref:a}),o.password&&r.createElement(P.a,{message:"Password is required",type:"error",showIcon:!0})),r.createElement("div",null,r.createElement("input",{type:"checkbox",name:"rememberMe",ref:a}),"Remember me"),r.createElement("button",{type:"submit"},"Enter")))))},F=g.a.create({baseURL:"http://localhost:7542/1.0/"}),U=function(e,t){return F.post("auth/register",{email:e,password:t}).then((function(e){return e.data}))},I="authorization-module-project/registerReducer/SET_USER_DATA_SUCCESS",T={addedUser:{created:null,email:null,isAdmin:!1,name:null,publicCardPacksCount:null,rememberMe:!1,updated:null,verified:!1,__v:null,_id:null},success:!1},G=function(e){return{type:I,payload:Object(E.a)({},e)}},M=k.a().shape({email:k.b().email().required("test1").min(7),password:k.b().required("test2").min(8),passwordConfirmation:k.b().required("test3").label("Confirm password").test("passwordConfirmation","Passwords must match!",(function(e){return this.parent.password===e}))}),D=function(e){var t,n,a,l=Object(m.c)((function(e){return e.register.success})),o=Object(m.b)(),c=Object(C.d)({resolver:Object(R.a)(M)}),i=c.register,u=c.handleSubmit,d=c.errors,E=Object(r.useCallback)((function(e,t){return o(function(e,t){return function(){var n=Object(f.a)(p.a.mark((function n(r){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,U(e,t);case 3:a=n.sent,r(G(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))}),[o]);return r.createElement(r.Fragment,null,l?r.createElement("div",null,r.createElement("h3",null,"Congrats! You are registered!"),r.createElement(s.c,{to:"/sign-in"},"Sign-in")):r.createElement("div",null,r.createElement("h3",null,"Registration:"),r.createElement("form",{onSubmit:u((function(e){E(e.email,e.password)}))},r.createElement("label",{htmlFor:"email"},"Email: "),r.createElement("br",null),r.createElement("input",{id:"email",type:"text",name:"email",ref:i}),r.createElement("p",null,null===(t=d.email)||void 0===t?void 0:t.message),r.createElement("label",{htmlFor:"password"},"Password: "),r.createElement("br",null),r.createElement("input",{id:"password",type:"text",name:"password",ref:i}),r.createElement("p",null,null===(n=d.password)||void 0===n?void 0:n.message),r.createElement("label",{htmlFor:"passwordConfirmation"},"Confirm password: "),r.createElement("br",null),r.createElement("input",{id:"passwordConfirmation",type:"text",name:"passwordConfirmation",ref:i}),r.createElement("p",null,null===(a=d.passwordConfirmation)||void 0===a?void 0:a.message),r.createElement("input",{type:"submit"}))))},N=n(216),L=n(92),q=n(82),W=n.n(q),z=g.a.create({baseURL:"http://localhost:7542/1.0/"}),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"<a href='http://localhost:3000/authorization-module#/forgot'",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">reset-password-link</a>";return z.post("/auth/forgot",{email:e,html1:t,html2:n}).then((function(e){return e.data}))},B={success:!1,errorMessage:"",testEmail:"test@gmail.com"},J=k.a().shape({email:k.b().email().required()}),X=function(){var e,t=Object(C.d)({resolver:Object(R.a)(J)}),n=t.handleSubmit,l=t.errors,o=t.control,c=Object(m.c)((function(e){return e.forgotPage.errorMessage})),i=Object(m.b)(),u=Object(r.useCallback)((function(e){return i((t=e,function(){var e=Object(f.a)(p.a.mark((function e(n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t);case 3:r=e.sent,n({type:"FORGOTPAGE/CHANGE_PASSWORD_SUCCESS",success:r.success}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),a=e.t0.response.data.error,n({type:"FORGOTPAGE/CHANGE_PASSWORD_ERROR",errorMessage:a}),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));var t}),[i]);return a.a.createElement("div",{className:W.a.forgotPage},c&&a.a.createElement(P.a,{message:c,type:"warning",showIcon:!0,closable:!0}),a.a.createElement("h3",null,"Forgot"),a.a.createElement("form",{className:W.a.forgotForm,onSubmit:n((function(e){u(e.email),console.log(e)}))},a.a.createElement("div",{className:W.a.error},l.email?a.a.createElement(P.a,{message:null===(e=l.email)||void 0===e?void 0:e.message,type:"error",showIcon:!0}):null),a.a.createElement(C.a,{as:N.a,name:"email",control:o,placeholder:"Email"}),a.a.createElement(L.a,{htmlType:"submit",type:"primary"},"Send email")),a.a.createElement(s.b,{to:"/sign-in"},"Sign In"))},Y=function(e){return r.createElement("div",null,r.createElement("h3",null,"SetNewPass"))};var K=function(){return a.a.createElement("div",{className:"main"},a.a.createElement(i,null),a.a.createElement(u.b,{path:"/",render:function(){return a.a.createElement(u.a,{to:"/sign-in"})}}),a.a.createElement(u.b,{path:"/profile",render:function(){return a.a.createElement(j,null)}}),a.a.createElement(u.b,{path:"/sign-in",render:function(){return a.a.createElement(x,null)}}),a.a.createElement(u.b,{path:"/register",render:function(){return a.a.createElement(D,null)}}),a.a.createElement(u.b,{path:"/forgot",render:function(){return a.a.createElement(X,null)}}),a.a.createElement(u.b,{path:"/set-new-pass",render:function(){return a.a.createElement(Y,null)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(68),$=n(131),Q=Object(V.c)({forgotPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOTPAGE/CHANGE_PASSWORD_SUCCESS":return Object(E.a)({},e,{success:t.success});case"FORGOTPAGE/CHANGE_PASSWORD_ERROR":return Object(E.a)({},e,{errorMessage:t.errorMessage});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(E.a)({},e,{addedUser:Object(E.a)({},t.payload.addedUser),success:t.payload.success});default:return e}},singInReducer:y}),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,ee=Object(V.d)(Q,Z(Object(V.a)($.a)));o.a.render(a.a.createElement(s.a,null,a.a.createElement(m.a,{store:ee},a.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,n){e.exports={forgotPage:"Forgot_forgotPage__neKLE",error:"Forgot_error__BLT2U",forgotForm:"Forgot_forgotForm__UfYTJ"}}},[[134,1,2]]]);
//# sourceMappingURL=main.968fb306.chunk.js.map