(this["webpackJsonpauthorization-module"]=this["webpackJsonpauthorization-module"]||[]).push([[0],{141:function(e,t,a){e.exports=a(220)},146:function(e,t,a){},147:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(10),o=a.n(s),l=(a(146),a(147),a(148),a(221)),c=a(31);function i(){return r.createElement(l.a,{mode:"horizontal"},r.createElement(l.a.Item,{key:"profile"},r.createElement(c.c,{to:"/profile"},"Profile")),r.createElement(l.a.Item,{key:"sign-in"},r.createElement(c.c,{to:"/sign-in"},"Sign-in")),r.createElement(l.a.Item,{key:"register"},r.createElement(c.c,{to:"/register"},"Register")),r.createElement(l.a.Item,{key:"forgot"},r.createElement(c.c,{to:"/forgot"},"Forgot")),r.createElement(l.a.Item,{key:"set-new-pass"},r.createElement(c.c,{to:"/set-new-password"},"Set new pass")))}var u=a(21),m=a(32),d=a(5),p=a.n(d),f=a(25),g=a(44),E=a(64),h=a.n(E),b=h.a.create({baseURL:"http://localhost:7542/1.0/"}),w=function(e,t,a){return b.post("auth/login",{email:e,password:t,rememberMe:a}).then((function(e){return e.data})).catch((function(e){return e}))},_=function(){return b.delete("auth/login").then((function(e){return e.data})).catch((function(e){return e}))},v=a(121),P=a(122),O=new(a(139).a),y=new(function(){function e(){Object(v.a)(this,e)}return Object(P.a)(e,[{key:"get",value:function(e){return O.get(e)}},{key:"set",value:function(e,t){O.set(e,t)}},{key:"remove",value:function(e){O.remove(e)}}]),e}()),S={_id:null,email:null,rememberMe:!1,isAdmin:!1,name:null,verified:null,publicCardPacksCount:null,__v:null,password:null,token:null,success:!1},C=function(e){return{type:"SET_USER_DATA",authUserData:e}},j=function(){return function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:e.sent.success&&t(C({_id:null,email:null,rememberMe:!1,isAdmin:!1,name:null,verified:null,publicCardPacksCount:null,__v:null,password:null,token:null,success:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(g.a)({},e,{},t.authUserData);default:return e}},R=function(e){var t=Object(m.b)();return r.createElement("div",null,r.createElement("div",null,r.createElement("h3",null,"Profile")),r.createElement("button",{onClick:function(){t(j)}},"Logout"))},N=a(19),I=a(50),A=a(223),x=a(224),T=a(98),U=a(94),F=a.n(U),D=a(36),G=D.a().shape({email:D.b().required().min(2),password:D.b().required().min(8)}),M=D.a().shape({email:D.b().email().required().min(7),password:D.b().required().min(8),passwordConfirmation:D.b().required().label("Confirm password").test("passwordConfirmation","Passwords must match!",(function(e){return this.parent.password===e}))}),q=D.a().shape({email:D.b().email().required()}),L=D.a().shape({password:D.b().required().min(8),passwordConfirmation:D.b().required().test("passwordConfirmation","Passwords must match!",(function(e){return this.parent.password===e}))}),z=function(){var e=Object(m.b)(),t=Object(N.d)({resolver:Object(I.a)(G)}),a=t.register,r=t.handleSubmit,s=t.errors,o=t.control;return Object(m.c)((function(e){return e.singInReducer.success}))?n.a.createElement(u.a,{to:"/profile"}):n.a.createElement("div",{className:F.a.signInPage},n.a.createElement("div",null,n.a.createElement("h3",null,"SignIn")),n.a.createElement("form",{onSubmit:r((function(t){var a=t.email,r=t.password,n=t.rememberMe;e(function(e,t,a){return function(){var r=Object(f.a)(p.a.mark((function r(n){var s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w(e,t,a);case 3:s=r.sent,y.set("auth_token",s.token),n(C(s)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}(a,r,n))})),className:F.a.signInPage__form},n.a.createElement("div",null,n.a.createElement(N.a,{as:A.a,name:"email",control:o,placeholder:"Email"}),s.email&&n.a.createElement(x.a,{message:"Login is required",type:"error",showIcon:!0})),n.a.createElement("div",null,n.a.createElement(N.a,{as:A.a.Password,name:"password",control:o,placeholder:"Password"}),s.password&&n.a.createElement(x.a,{message:"Password is required",type:"error",showIcon:!0})),n.a.createElement(c.b,{to:"/forgot"},"Forgot password?"),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",name:"rememberMe",ref:a})," Remember me"),n.a.createElement(T.a,{htmlType:"submit",type:"primary"},"Sign In")),n.a.createElement(c.b,{to:"/register"},"Registration"))},W=h.a.create({baseURL:"http://localhost:7542/1.0/"}),H=function(e,t){return W.post("auth/register",{email:e,password:t}).then((function(e){return e.data}))},J="authorization-module-project/registerReducer/SET_USER_DATA_SUCCESS",B={addedUser:{created:null,email:null,isAdmin:!1,name:null,publicCardPacksCount:null,rememberMe:!1,updated:null,verified:!1,__v:null,_id:null},success:!1},K=function(e){return{type:J,payload:Object(g.a)({},e)}},X=a(97),V=a.n(X),Y=function(){var e,t,a,s=Object(m.c)((function(e){return e.register.success})),o=Object(m.b)(),l=Object(N.d)({resolver:Object(I.a)(M)}),i=l.handleSubmit,d=l.errors,g=l.control,E=Object(r.useCallback)((function(e,t){return o(function(e,t){return function(){var a=Object(f.a)(p.a.mark((function a(r){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,H(e,t);case 3:n=a.sent,r(K(n)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(e,t))}),[o]);return s?n.a.createElement(u.a,{to:"/sign-in"}):n.a.createElement("div",{className:V.a.registerPage},n.a.createElement("div",null,n.a.createElement("h3",null,"Registration")),n.a.createElement("form",{onSubmit:i((function(e){E(e.email,e.password)})),className:V.a.registerPage__form},n.a.createElement(N.a,{as:A.a,name:"email",control:g,placeholder:"Email"}),n.a.createElement("p",null,null===(e=d.email)||void 0===e?void 0:e.message),n.a.createElement(N.a,{as:A.a.Password,name:"password",type:"password",control:g,placeholder:"Password"}),n.a.createElement("p",null,null===(t=d.password)||void 0===t?void 0:t.message),n.a.createElement(N.a,{as:A.a.Password,type:"password",name:"passwordConfirmation",control:g,placeholder:"Confirm password"}),n.a.createElement("p",null,null===(a=d.passwordConfirmation)||void 0===a?void 0:a.message),n.a.createElement(T.a,{htmlType:"submit",type:"primary"},"Register")),n.a.createElement(c.b,{to:"/sign-in"},"Sign In"))},Q=a(84),Z=a.n(Q),$=h.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"<a href='http://localhost:3000/authorization-module#/set-new-password'",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">reset-password-link</a>";return $.post("/auth/forgot",{email:e,html1:t,html2:a}).then((function(e){return e.data}))},te={success:!1,errorMessage:""},ae=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee(e);case 3:r=t.sent,a({type:"FORGOTPAGE/CHANGE_PASSWORD_SUCCESS",success:r.success}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"FORGOTPAGE/CHANGE_PASSWORD_ERROR",errorMessage:t.t0.response.data.error}),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},re=function(){var e,t=Object(N.d)({resolver:Object(I.a)(q)}),a=t.handleSubmit,s=t.errors,o=t.control,l=Object(m.c)((function(e){return e.forgotPage.errorMessage})),i=Object(m.b)(),u=Object(r.useCallback)((function(e){return i(ae(e))}),[i]);return n.a.createElement("div",{className:Z.a.forgotPage},l&&n.a.createElement(x.a,{message:l,type:"warning",showIcon:!0,closable:!0}),n.a.createElement("h3",null,"Forgot password?"),n.a.createElement("span",null,"Please enter ",n.a.createElement("b",null,"email")," that you used to sign in"),n.a.createElement("form",{className:Z.a.forgotForm,onSubmit:a((function(e){u(e.email)}))},n.a.createElement("div",{className:Z.a.error},s.email?n.a.createElement(x.a,{message:null===(e=s.email)||void 0===e?void 0:e.message,type:"error",showIcon:!0}):null),n.a.createElement(N.a,{as:A.a,name:"email",control:o,placeholder:"Email"}),n.a.createElement(T.a,{htmlType:"submit",type:"primary"},"Send email")),n.a.createElement(c.b,{to:"/sign-in"},"Sign In"))},ne=a(85),se=a.n(ne),oe=function(){var e,t,a=Object(N.d)({resolver:Object(I.a)(L)}),s=a.handleSubmit,o=a.errors,l=a.control,c=Object(m.b)(),i=Object(r.useCallback)((function(e){return c(ae(e))}),[c]);return n.a.createElement("div",{className:se.a.setNewPassPage},n.a.createElement("div",{className:se.a.setNewPassPage__info},n.a.createElement("h3",null,"Choose a New Password"),n.a.createElement("span",null,"Create a new password that is at least 8 characters long")),n.a.createElement("form",{onSubmit:s((function(e){i(e.password),console.log(e)})),className:se.a.setNewPassPage__form},n.a.createElement(N.a,{as:A.a.Password,name:"password",type:"password",control:l,placeholder:"Password"}),n.a.createElement("p",null,null===(e=o.password)||void 0===e?void 0:e.message),n.a.createElement(N.a,{as:A.a.Password,type:"password",name:"passwordConfirmation",control:l,placeholder:"Confirm password"}),n.a.createElement("p",null,null===(t=o.passwordConfirmation)||void 0===t?void 0:t.message),n.a.createElement(T.a,{htmlType:"submit",type:"primary"},"Continue")))};var le=function(){return n.a.createElement("div",{className:"main"},n.a.createElement(i,null),n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/profile",render:function(){return n.a.createElement(R,null)}}),n.a.createElement(u.b,{path:"/sign-in",render:function(){return n.a.createElement(z,null)}}),n.a.createElement(u.b,{path:"/register",render:function(){return n.a.createElement(Y,null)}}),n.a.createElement(u.b,{path:"/forgot",render:function(){return n.a.createElement(re,null)}}),n.a.createElement(u.b,{path:"/set-new-password",render:function(){return n.a.createElement(oe,null)}})))},ce=a(68),ie=a(137),ue=Object(ce.c)({forgotPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOTPAGE/CHANGE_PASSWORD_SUCCESS":return Object(g.a)({},e,{success:t.success});case"FORGOTPAGE/CHANGE_PASSWORD_ERROR":return Object(g.a)({},e,{errorMessage:t.errorMessage});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(g.a)({},e,{addedUser:Object(g.a)({},t.payload.addedUser),success:t.payload.success});default:return e}},singInReducer:k}),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,de=Object(ce.d)(ue,me(Object(ce.a)(ie.a)));o.a.render(n.a.createElement(c.a,null,n.a.createElement(m.a,{store:de},n.a.createElement(le,null))),document.getElementById("root"))},84:function(e,t,a){e.exports={forgotPage:"Forgot_forgotPage__neKLE",error:"Forgot_error__BLT2U",forgotForm:"Forgot_forgotForm__UfYTJ"}},85:function(e,t,a){e.exports={setNewPassPage:"SetNewPass_setNewPassPage__3smxh",setNewPassPage__info:"SetNewPass_setNewPassPage__info__DRlit",setNewPassPage__form:"SetNewPass_setNewPassPage__form__21O7x"}},94:function(e,t,a){e.exports={signInPage:"SignIn_signInPage__WFi5q",signInPage__form:"SignIn_signInPage__form__1tCuA"}},97:function(e,t,a){e.exports={registerPage:"Register_registerPage__5npDg",registerPage__form:"Register_registerPage__form__2krKA"}}},[[141,1,2]]]);
//# sourceMappingURL=main.fdfe1cf2.chunk.js.map